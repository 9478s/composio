"""PraisonAI SWE Agent"""

import dotenv
import os
import yaml
from praisonai import PraisonAI
from custom_tools import say
from typing import Literal, Annotated, Sequence, TypedDict
from composio_praisonai import ComposioToolSet, Action, WorkspaceType, App
from prompts import autonomous_engineer_system_prompt, DESCRIPTION

# Load environment variables from .env
dotenv.load_dotenv()

composio_toolset = ComposioToolSet(workspace_config=WorkspaceType.Host())

# Get required tools
tools = [
    *composio_toolset.get_tools(
        apps=[
            App.FILETOOL,
            App.SHELLTOOL,
        ]
    ),
    *composio_toolset.get_actions(
        actions=[
            say,  # This is just here as an example of a custom tool, you can remove it
            Action.GITHUB_CREATE_A_PULL_REQUEST
        ]
    ),
]

tool_section_str = composio_toolset.get_tools_section(tools)
print(tool_section_str)

agent_yaml=f"""
framework: "crewai"
topic: "Github-SWE"
roles:
    SWE:
        {autonomous_engineer_system_prompt}
"""+tool_section_str

print(agent_yaml)

# Create a PraisonAI instance with the agent_yaml content
agent = PraisonAI(agent_yaml=agent_yaml)

