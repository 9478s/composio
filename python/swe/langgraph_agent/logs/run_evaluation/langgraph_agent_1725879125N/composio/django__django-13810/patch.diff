diff --git a/django/core/handlers/base.py b/django/core/handlers/base.py
index 8e8c3da0..52c4d34d 100644
--- a/django/core/handlers/base.py
+++ b/django/core/handlers/base.py
@@ -49,6 +49,12 @@ class BaseHandler:
                 middleware_is_async = False
             else:
                 middleware_is_async = middleware_can_async
+                if is_async and not middleware_can_async:
+                    logger.warning(
+                        'Middleware %s is sync-only but is being used in an ASGI application. '
+                        'You should either make the middleware async-capable or use it in a WSGI application instead.',
+                        middleware_path
+                    )
             try:
                 # Adapt handler, if needed.
                 handler = self.adapt_method_mode(
@@ -64,6 +70,10 @@ class BaseHandler:
                         logger.debug('MiddlewareNotUsed: %r', middleware_path)
                 continue
 
+            # Reset handler and handler_is_async when middleware is not used
+            handler = get_response
+            handler_is_async = is_async
+
             if mw_instance is None:
                 raise ImproperlyConfigured(
                     'Middleware factory %s returned None.' % middleware_path
